@if (config){
<app-button
  type="button"
  variant="quaternary"
  [disabled]="pointsService.points().lt(price) || !unlocked"
  [hoverable]="pointsService.points().gte(price) && unlocked"
  [active]="false"
  [clickable]="!(pointsService.points().lt(price) || !unlocked)"
  (click)="buyProducer()"
>
  @if (unlocked) { @if (shopControls.gridView()) {
  <div class="producer-grid-content">
    <div class="flex flex-row gap-2 w-full items-center">
      <div>
        <img
          class="producer-grid-image"
          src="{{ config.image }}"
          alt="{{ config.name | transloco }}"
        />
        <p class="producer-grid-name">{{ config.name | transloco }}</p>
      </div>
      <div class="flex flex-col justify-evenly ml-auto text-right">
        @if (quantity > 0) {
        <p class="producer-grid-quantity">x{{ quantity }}</p>
        <p class="producer-grid-production">{{ calculateTotalPoints() | short }} {{ 'producers.cps' | transloco }}</p>
        }
      </div>
    </div>

    <div class="producer-grid-stats">
      <p
        class="producer-grid-price"
        [ngClass]="pointsService.points().gte(price) ? 'text-green-700' : 'text-red-600'"
      >
        {{ price | short }} ¢
      </p>
    </div>
  </div>
  } @else {
  <div class="flex w-full items-center justify-between gap-2 sm:gap-4 flex-row">
    <div class="producer-left flex items-center gap-2 sm:gap-4 flex-1 w-full">
      <img
        class="size-14 sm:size-20 shrink-0"
        src="{{ config.image }}"
        alt="{{ config.name | transloco }}"
      />
      <div class="flex flex-col justify-center gap-0.5 sm:gap-1">
        <p class="text-lg sm:text-2xl leading-tight">{{ config.name | transloco }}</p>
        <div class="flex items-baseline gap-1 sm:gap-2">
          <p
            class="text-sm sm:text-base"
            [ngClass]="pointsService.points().gte(price) ? 'text-green-700' : 'text-red-600'"
          >
            {{ price | short }} ¢
          </p>
          @if (shopControls.buyAmount() > 1) {
          <span class="text-[10px] sm:text-xs opacity-60">(x{{ shopControls.buyAmount() }})</span>
          }
        </div>
      </div>
    </div>

    <div class="flex items-center gap-3 sm:gap-6 shrink-0 w-auto justify-between sm:justify-end">
      <div class="flex flex-col items-center">
        <p class="text-[10px] sm:text-xs opacity-60 uppercase tracking-wide">{{ 'producers.owned' | transloco }}</p>
        <p class="text-2xl sm:text-3xl font-bold text-amber-700">{{ quantity }}</p>
      </div>

      <div class="h-12 sm:h-16 w-px bg-amber-800 opacity-20"></div>

      <div class="producer-stats flex flex-col items-end">
        @if (quantity > 0) {
        <p class="text-[10px] sm:text-xs opacity-60 uppercase tracking-wide">{{ 'producers.production' | transloco }}</p>
        <p class="text-lg sm:text-2xl font-bold text-green-700">
          {{ calculateTotalPoints() | short }} {{ 'producers.cps' | transloco }}
        </p>
        } @else {
        <p class="text-[10px] sm:text-xs opacity-60 uppercase tracking-wide">{{ 'producers.willProduce' | transloco }}</p>
        <p class="text-base sm:text-xl font-semibold text-gray-600">{{ points | short }} {{ 'producers.cps' | transloco }}</p>
        <p class="text-[10px] sm:text-xs opacity-50">{{ 'producers.perUnit' | transloco }}</p>
        }
      </div>
    </div>
  </div>
  } } @else {
  <div class="flex w-full h-16 justify-center items-center italic opacity-70 text-amber-800">
    <p>{{ 'upgrades.level' | transloco }} {{ config.level }}</p>
  </div>
  }
</app-button>
}
