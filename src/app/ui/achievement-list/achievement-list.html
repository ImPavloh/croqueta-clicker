<div class="achievement-list-container">
  <div class="achievement-list-header">
    <h2 class="text-3xl font-bold text-yellow-500 text-shadow-amber-950 text-shadow-sm shrink-0">
      Logros
    </h2>
    <div class="grow w-full bg-amber-950/80 rounded-full h-4 overflow-hidden shadow-md">
      <div
        class="h-4 bg-linear-to-r from-yellow-500 to-yellow-700 rounded-full transition-all duration-500 ease-in-out"
        [style.width.%]="(unlockedCount / totalCount) * 100"
      ></div>
    </div>
    <div
      class="text-2xl font-bold text-yellow-500 text-shadow-amber-950 text-shadow-xs shrink-0 min-w-20 text-center"
    >
      {{ unlockedCount }} / {{ totalCount }}
    </div>
  </div>

  <div class="achievement-list-scrollable">
    <div class="grid grid-cols-1 sm:grid-cold-2 md:grid-cols-3 gap-4">
      @for (item of achievementsWithState; track item.id) {
      <app-tooltip [text]="getTooltipText(item)" [position]="'bottom'">
        <app-corner-card
          [size]="'md'"
          [active]="item.unlocked"
          [variant]="item.unlocked ? 'primary' : 'default'"
          [showCorners]="true"
          cornerStyle="simple"
        >
          <div class="relative flex items-center gap-4 w-full">
            <div class="flex items-center gap-3">
              @if (item.icon) {
              <div class="shrink-0">
                <img
                  [src]="item.icon"
                  [alt]="item.title"
                  class="w-10 h-10 rounded-sm object-cover drop-shadow-2xl transition-all duration-300"
                  [class.grayscale]="!item.unlocked"
                  [class.opacity-50]="!item.unlocked"
                  [class.brightness-110]="item.unlocked"
                />
              </div>
              }
            </div>

            <!-- Contenido del logro -->
            <div class="flex-1 min-w-0">
              <h3
                class="text-lg mb-1 truncate"
                [class.text-amber-800]="item.unlocked"
                [class.text-gray-600]="!item.unlocked"
                [class.text-shadow-amber-950]="item.unlocked"
                [class.text-shadow-xs]="item.unlocked"
              >
                {{ item.title }}
              </h3>
            </div>

            <span
              class="absolute top-0 right-0 inline-flex items-center px-2 py-1 rounded-full text-xs border shadow-lg"
              [ngClass]="
                item.unlocked
                  ? 'bg-amber-200/80 text-amber-800 border-amber-400'
                  : 'bg-gray-200/80 text-gray-600 border-gray-400'
              "
            >
              {{ item.unlocked ? 'âœ“' : 'ðŸ”’' }}
            </span>
          </div>
        </app-corner-card>
      </app-tooltip>
      }
    </div>
  </div>
</div>
